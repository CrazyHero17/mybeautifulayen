<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Ayen üåª</title>
    <style>
        /* --- RESET & FONTS --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            height: 100vh; width: 100vw;
            overflow: hidden;
            background: linear-gradient(135deg, #fffde7, #e0f7fa);
            font-family: 'Georgia', serif;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column;
            position: relative;
        }

        /* --- BACKGROUND DECORATIONS --- */
        .bg-flower {
            position: absolute; font-size: 8rem; opacity: 0.2; z-index: 0;
            filter: blur(3px); animation: sway 6s ease-in-out infinite alternate;
            user-select: none;
        }
        .f1 { top: -50px; left: -20px; animation-delay: 0s; }
        .f2 { top: 20%; right: -30px; font-size: 6rem; animation-delay: 1s; }
        .f3 { bottom: 15%; left: -20px; font-size: 7rem; animation-delay: 2s; }
        .f4 { top: -40px; right: 20%; font-size: 5rem; animation-delay: 3s; }

        @keyframes sway { from { transform: rotate(-10deg); } to { transform: rotate(10deg); } }

        /* --- GLASSMORPHISM CARD --- */
        .card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 2rem; border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1), inset 0 0 0 2px rgba(255,255,255,0.7);
            text-align: center; z-index: 10;
            width: 90%; max-width: 420px;
            max-height: 90vh; overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.9);
            transition: all 0.5s ease;
        }
        .card::-webkit-scrollbar { width: 0px; background: transparent; }
        .card.hidden { transform: scale(0.8) translateY(-50px); opacity: 0; pointer-events: none; }

        h1 {
            color: #fbc02d; font-size: 2rem; margin: 0.5rem 0;
            text-shadow: 2px 2px 0px rgba(255,255,255,1); letter-spacing: 1px;
        }
        p { color: #558b2f; font-size: 1.1rem; line-height: 1.6; font-weight: 500;}

        /* --- BUTTONS --- */
        .btn {
            padding: 14px 28px;
            background: linear-gradient(45deg, #fbc02d, #f9a825);
            color: white; border: none; border-radius: 50px;
            font-size: 1rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 5px 15px rgba(249, 168, 37, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 12px; width: 100%; max-width: 280px;
            position: relative; overflow: hidden;
        }
        .btn:active { transform: scale(0.95); }
        .btn-music { background: linear-gradient(45deg, #9ccc65, #7cb342); box-shadow: 0 5px 15px rgba(139, 195, 74, 0.4); }
        .btn-gallery { background: linear-gradient(45deg, #ffa726, #fb8c00); margin-top: 15px; box-shadow: 0 5px 15px rgba(255, 167, 38, 0.4); }
        .btn-letter { background: linear-gradient(45deg, #ab47bc, #8e24aa); box-shadow: 0 5px 15px rgba(171, 71, 188, 0.4); }
        .btn-ask { background: linear-gradient(45deg, #ec407a, #d81b60); box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4); }
        .btn-reasons { background: linear-gradient(45deg, #42a5f5, #1e88e5); margin-top: 10px; box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4); }

        /* --- SLIDESHOW (Polaroid Fit) --- */
        .slideshow-wrapper {
            background: #fff; padding: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transform: rotate(-1deg); margin: 25px auto;
            width: 95%; border-radius: 6px;
        }
        .slideshow-container {
            position: relative; width: 100%; height: 280px;
            overflow: hidden; background: #fafafa; border-radius: 4px;
        }
        .slide {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: contain; opacity: 0; transition: opacity 0.8s ease-in-out;
            transform: scale(0.95);
        }
        .slide.active {
            opacity: 1; transform: scale(1);
            transition: opacity 0.8s ease-in-out, transform 4s linear;
        }

        /* --- TYPEWRITER CURSOR FIX --- */
        /* The cursor is now attached directly to the text via CSS */
        #typewriter-text {
            text-align: left;
            font-style: italic;
            margin-bottom: 15px;
            display: inline-block; /* Keeps cursor with text */
            position: relative;
        }
        
        /* The blinking line */
        #typewriter-text::after {
            content: '|';
            display: inline-block;
            margin-left: 2px;
            color: #333;
            animation: blink 0.8s infinite;
        }

        /* Class to remove cursor when done */
        #typewriter-text.typing-done::after {
            display: none;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- OVERLAYS --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fffbf0; z-index: 100; display: none; opacity: 0;
            overflow-y: auto; padding: 20px; transition: opacity 0.5s;
        }
        .overlay.visible { display: block; opacity: 1; }
        
        .gallery-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;
            max-width: 800px; margin: 0 auto 80px auto;
        }
        @media (min-width: 600px) { .gallery-grid { grid-template-columns: repeat(3, 1fr); } }

        .gallery-item img {
            width: 100%; height: auto; border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .note-card {
            background: #fff59d; padding: 20px;
            display: flex; justify-content: center; align-items: center;
            text-align: center; font-family: 'Courier New', monospace;
            font-weight: bold; color: #555;
            box-shadow: 2px 4px 6px rgba(0,0,0,0.1);
            transform: rotate(2deg); border-radius: 2px; font-size: 0.9rem; min-height: 150px;
        }
        .note-card:nth-child(even) { transform: rotate(-2deg); background: #ffccbc; }

        /* --- LETTER PAPER --- */
        .letter-paper {
            background: #fff; padding: 40px; max-width: 600px; margin: 20px auto 80px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid #e0e0e0; position: relative;
        }
        .letter-paper::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 30px; background: rgba(251, 192, 45, 0.5);
        }
        .letter-text { font-size: 1.1rem; line-height: 1.8; text-align: left; color: #444; }
        .letter-text p { margin-bottom: 20px; color: #444; }
        .signature { text-align: right; font-style: italic; font-weight: bold; margin-top: 30px; font-size: 1.3rem;}

        /* --- PROPOSAL --- */
        #proposal-overlay {
            background: rgba(255,255,255,0.95); z-index: 200; display: none;
            justify-content: center; align-items: center; flex-direction: column;
            padding: 20px; text-align: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        }
        .proposal-btns {
            display: flex; gap: 20px; justify-content: center; align-items: center;
            position: relative; height: 100px; width: 100%;
        }
        .btn-yes { background: #e91e63; padding: 15px 40px; font-size: 1.5rem; z-index: 205; }
        .btn-no { background: #9e9e9e; padding: 15px 40px; font-size: 1.5rem; position: absolute; transition: all 0.2s ease; }

        .back-btn {
            position: fixed; bottom: 20px; right: 20px; padding: 12px 24px;
            background: #fbc02d; color: white; border-radius: 30px; border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: bold; cursor: pointer; z-index: 101;
        }

        /* --- DECOR --- */
        .main-icon { font-size: 4rem; display: block; animation: beat 1.5s infinite; margin-bottom: 10px; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        
        .hidden-content { display: none; border-top: 1px dashed #ccc; margin-top: 20px; padding-top: 10px;}
        
    </style>
</head>
<body>

    <div class="bg-flower f1">üåª</div>
    <div class="bg-flower f2">üåº</div>
    <div class="bg-flower f3">üåª</div>
    <div class="bg-flower f4">üåº</div>

    <audio id="bgMusic" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <div class="card" id="mainCard">
        <div class="main-icon">üåª</div>
        <h1>For My Sunshine, Ayen</h1>
        <p>A little something for the one who holds my heart.</p>
        
        <button class="btn" id="openBtn" onclick="revealMessage()">Open Letter üíå</button>
        <button class="btn btn-music" onclick="toggleMusic()" style="margin-top: 10px;">Play Music üéµ</button>

        <div class="hidden-content" id="message">
            <div style="text-align: left;">
                <span id="typewriter-text"></span>
            </div>
            
            <div class="slideshow-wrapper">
                <div class="slideshow-container">
                    <img src="photo1.jpeg" class="slide active">
                    <img src="photo2.jpeg" class="slide">
                    <img src="photo3.jpeg" class="slide">
                    <img src="photo4.jpeg" class="slide">
                    <img src="photo5.jpeg" class="slide">
                    <img src="photo6.jpeg" class="slide">
                </div>
            </div>

            <p>Happy Valentine's Day! üíõ</p>

            <button class="btn btn-reasons" onclick="showReason()">Why I Love You ‚ú®</button>
            <button class="btn btn-gallery" onclick="openOverlay('gallery-overlay')">My Ayen üì∏</button>
            <button class="btn btn-letter" onclick="openOverlay('letter-overlay')">Read My Letter üìù</button>
            <button class="btn btn-ask" onclick="showProposal()">‚ùì One Last Question</button>
        </div>
    </div>

    <div id="letter-overlay" class="overlay">
        <h2 style="text-align: center; color: #fbc02d; margin-top: 30px;">A Letter For Ayen</h2>
        <div class="letter-paper">
            <div class="letter-text">
                <p><strong>To My Dearest Ayen,</strong></p>
                <p>I wanted to write this because sometimes I don't say it enough: <strong>Thank you.</strong></p>
                <p>Thank you for everything you've done for me. Thank you for the big things, like supporting me when I'm tired or stressed, but also for the small things‚Äîlike the way you smile at me or how you make my day better just by being in it.</p>
                <p>You have been my rock, my safe place, and my greatest happiness. I appreciate every sacrifice you've made and every moment of kindness you've shown me. You make me want to be a better person.</p>
                <p>No matter what happens, I want you to know that I see everything you do, and I treasure you more than words can say.</p>
                <div class="signature">Forever Yours,<br>CJ</div>
            </div>
        </div>
        <button class="back-btn" onclick="closeOverlay('letter-overlay')">Back</button>
    </div>

    <div id="gallery-overlay" class="overlay">
        <h2 style="text-align: center; color: #f9a825; margin: 30px 0;">My Ayen</h2>
        <div class="gallery-grid">
            <div class="gallery-item"><img src="photo1.jpeg"></div>
            <div class="note-card">"Ayen, your smile is my favorite thing in the world."</div>
            <div class="gallery-item"><img src="photo2.jpeg"></div>
            <div class="note-card">"I love how adorable you are."</div>
            <div class="gallery-item"><img src="photo3.jpeg"></div>
            <div class="gallery-item"><img src="photo4.jpeg"></div>
            <div class="note-card">"You inspire me every single day."</div>
            <div class="gallery-item"><img src="photo5.jpeg"></div>
            <div class="gallery-item"><img src="photo6.jpeg"></div>
            <div class="gallery-item"><img src="c1.jpeg" onerror="this.parentElement.style.display='none'"></div>
            <div class="gallery-item"><img src="c2.jpeg" onerror="this.parentElement.style.display='none'"></div>
        </div>
        <button class="back-btn" onclick="closeOverlay('gallery-overlay')">Back</button>
    </div>

    <div id="proposal-overlay">
        <div class="proposal-box">
            <div style="font-size: 5rem; margin-bottom: 20px;">üíò</div>
            <h1>Ayen, will you be my Valentine?</h1>
            <div class="proposal-btns">
                <button class="btn btn-yes" onclick="acceptProposal()">YES!</button>
                <button class="btn btn-no" id="noBtn" onmouseover="moveButton()" ontouchstart="moveButton()">NO</button>
            </div>
        </div>
    </div>

    <script>
        const messageText = "To My Favorite Person, Ayen,\n\nEvery moment with you is beautiful. Just like a sunflower follows the sun, my eyes always look for you.\n\nThis is just a small reminder of how amazing you are.";
        
        const reasons = [
            "Because you make me laugh like no one else.",
            "Because you are smart, strong, and capable.",
            "Because your eyes sparkle when you're happy.",
            "Because you support my dreams.",
            "Because you give the best hugs.",
            "Because being with you feels like home.",
            "Because you are beautiful inside and out."
        ];

        function revealMessage() {
            const msgDiv = document.getElementById('message');
            const btn = document.getElementById('openBtn');
            if (msgDiv.style.display === 'block') return;
            
            msgDiv.style.display = 'block';
            btn.style.display = 'none';
            
            startSlideshow();
            typeWriter();
        }

        // --- FIXED TYPEWRITER LOGIC ---
        let i = 0;
        function typeWriter() {
            const el = document.getElementById("typewriter-text");
            if (i < messageText.length) {
                el.innerHTML += messageText.charAt(i) === '\n' ? '<br>' : messageText.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            } else {
                // When done, add class to hide the cursor
                el.classList.add("typing-done");
            }
        }

        function showReason() {
            const randomReason = reasons[Math.floor(Math.random() * reasons.length)];
            alert("üíõ " + randomReason);
            createBurst();
        }

        let slideIndex = 0;
        function startSlideshow() {
            const slides = document.querySelectorAll('.slide');
            if(slides.length === 0) return;
            setInterval(() => {
                slides[slideIndex].classList.remove('active');
                slideIndex = (slideIndex + 1) % slides.length;
                slides[slideIndex].classList.add('active');
            }, 3000);
        }

        function toggleMusic() {
            const audio = document.getElementById("bgMusic");
            audio.paused ? audio.play() : audio.pause();
        }

        function openOverlay(id) {
            document.getElementById('mainCard').classList.add('hidden');
            setTimeout(() => {
                document.getElementById(id).classList.add('visible');
                document.body.style.overflow = 'auto'; 
            }, 300);
        }
        function closeOverlay(id) {
            document.getElementById(id).classList.remove('visible');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                document.getElementById('mainCard').classList.remove('hidden');
            }, 300);
        }

        function showProposal() {
            document.getElementById('proposal-overlay').style.display = 'flex';
        }
        function moveButton() {
            const btn = document.getElementById('noBtn');
            const x = Math.random() * (window.innerWidth - btn.offsetWidth - 20);
            const y = Math.random() * (window.innerHeight - btn.offsetHeight - 20);
            btn.style.position = 'absolute'; btn.style.left = x + 'px'; btn.style.top = y + 'px';
        }
        function acceptProposal() {
            alert("Yay! I love you Ayen! ‚ù§Ô∏èüåª");
            document.getElementById('proposal-overlay').style.display = 'none';
            for(let k=0; k<50; k++) { setTimeout(() => { createTrail(window.innerWidth/2, window.innerHeight/2); }, k * 30); }
        }

        function createTrail(x, y) {
            const trail = document.createElement('div');
            trail.innerHTML = Math.random() > 0.5 ? 'üíõ' : 'üåª';
            trail.style.position = 'absolute'; trail.style.left = x + 'px'; trail.style.top = y + 'px';
            trail.style.pointerEvents = 'none'; trail.style.animation = 'floatUp 1s forwards';
            document.body.appendChild(trail);
            setTimeout(() => { trail.remove(); }, 1000);
        }
        function createBurst() {
            for(let k=0; k<15; k++) {
                createTrail(window.innerWidth/2 + (Math.random()*200 - 100), window.innerHeight/2 + (Math.random()*200 - 100));
            }
        }
        document.addEventListener('mousemove', (e) => { if(Math.random()<0.1) createTrail(e.clientX, e.clientY); });
        
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `@keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-50px); opacity: 0; } }`;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>

